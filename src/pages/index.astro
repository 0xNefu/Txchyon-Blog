---
export const prerender = true;

import { getCollection } from 'astro:content';
import DefaultPageLayout from '$/layouts/default.astro';
import PostPreviewList from '$/components/PostPreviewList.astro';
// import AsterPrice from '../components/AsterPrice.astro'   ← commented out so build works

const title = 'Txchyon Capital';
const description = 'Multi-strategy Investment Fund • Aster perpetuals • Real yields';

const allPosts = await getCollection('blog');
const posts = allPosts
  .filter(post => post.data.pubDate)
  .sort((a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf());
---

<DefaultPageLayout content={{ title, description }} showPageHeader={false}>
  <!-- ASTER HERO -->
  <section class="flex min-h-screen flex-col items-center justify-center px-6 py-24 text-center">
    <h1 class="text-7xl md:text-9xl font-black tracking-tight mb-8 bg-gradient-to-r from-[#00F2FF] via-[#7C3AED] to-[#EC4899] bg-clip-text text-transparent leading-none">
      Txchyon Capital
    </h1>
    <p class="text-xl md:text-2xl text-gray-300 mb-12 max-w-2xl">
      Multi-strategy trading firm • Aster perpetuals • Real yields
    </p>

    <!-- LIVE PRICE – temporarily static until we fix the component later -->
    <div class="rounded-2xl bg-gray-900/90 px-10 py-5 backdrop-blur border border-[#00F2FF]/30 shadow-2xl shadow-[#00F2FF]/20">
      <span class="text-5xl md:text-6xl font-mono font-bold text-[#00F2FF] tracking-tight">
        $ASTER ≈ <span>$1.29</span>
        <span class="text-sm ml-2 text-green-400">(offline)</span>
      </span>
    </div>

    <p class="mt-20 text-lg text-gray-500">
      Blog coming soon — stacking $ASTER in the meantime.
    </p>
  </section>

  <!-- LATEST POSTS -->
  {posts.length > 0 && (
    <section class="py-24">
      <div class="max-w-5xl mx-auto px-6">
        <h2 class="text-4xl font-bold text-center mb-12 text-cyan-400">Latest Research</h2>
        <PostPreviewList posts={posts.slice(0, 3)} />
        <div class="text-center mt-12">
          <a href="/blog" class="text-xl text-cyan-400 hover:underline">View all posts →</a>
        </div>
      </div>
    </section>
  )}
</DefaultPageLayout>